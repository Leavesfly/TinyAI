# 18.3 æ‰‹ç¨¿æ™ºèƒ½ä½“ï¼šæ–‡æ¡£ç†è§£ä¸ç”Ÿæˆ

> **è®¾è®¡æ€æƒ³**ï¼šå¥½çš„æ–‡æ¡£æ˜¯è½¯ä»¶çš„ç¬¬äºŒç”Ÿå‘½ã€‚æ‰‹ç¨¿æ™ºèƒ½ä½“ä¸ä»…èƒ½è¯»æ‡‚æ–‡æ¡£,è¿˜èƒ½åˆ›ä½œæ–‡æ¡£,æˆä¸ºæŠ€æœ¯å†™ä½œçš„å¾—åŠ›åŠ©æ‰‹ã€‚

## å¼•è¨€ï¼šä»Wordåˆ°AI Writer

å†™æ–‡æ¡£å¸¸å¸¸æ˜¯ç¨‹åºå‘˜æœ€å¤´ç–¼çš„äº‹ï¼š
- ğŸ“ é¡¹ç›®æ–‡æ¡£æ€»æ˜¯è¿‡æ—¶
- ğŸ“Š è®¾è®¡æ–‡æ¡£å†™å¾—å¤ªç®€ç•¥
- ğŸ“š APIæ–‡æ¡£ç¼ºå°‘ç¤ºä¾‹
- âœï¸ æŠ€æœ¯åšå®¢ä¸çŸ¥é“æ€ä¹ˆå¼€å¤´

**æ‰‹ç¨¿æ™ºèƒ½ä½“ï¼ˆManuscript Agentï¼‰** è¦è§£å†³çš„å°±æ˜¯è¿™äº›ç—›ç‚¹ã€‚å®ƒèƒ½ç†è§£æŠ€æœ¯æ–‡æ¡£çš„ç»“æ„å’Œå†…å®¹,è¿˜èƒ½ç”Ÿæˆé«˜è´¨é‡çš„æ–‡æ¡£ã€‚

```mermaid
graph LR
    A[ä¼ ç»Ÿæ–‡æ¡£å·¥ä½œæµ] --> A1[æ‰‹å†™è‰ç¨¿]
    A1 --> A2[åå¤ä¿®æ”¹]
    A2 --> A3[æ ¼å¼è°ƒæ•´]
    A3 --> A4[å®Œæˆ]
    
    B[AIå¢å¼ºå·¥ä½œæµ] --> B1[æè¿°éœ€æ±‚]
    B1 --> B2[AIç”Ÿæˆåˆç¨¿]
    B2 --> B3[äººå·¥å®¡æ ¸]
    B3 --> B4[å®Œæˆ]
    
    style A fill:#ffd43b
    style B fill:#51cf66
```

## å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬èŠ‚å­¦ä¹ å,ä½ å°†èƒ½å¤Ÿï¼š

- âœ… **è®¾è®¡æ–‡æ¡£æ™ºèƒ½ä½“æ¶æ„** - ç†è§£æ–‡æ¡£å¤„ç†ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶
- âœ… **å®ç°æ–‡æ¡£è§£æ** - æ„å»ºèƒ½ç†è§£å„ç§æ–‡æ¡£æ ¼å¼çš„è§£æå™¨
- âœ… **å¼€å‘å†…å®¹ç”Ÿæˆ** - å®ç°æ™ºèƒ½æ–‡æ¡£ç”ŸæˆåŠŸèƒ½
- âœ… **æ„å»ºæ ¼å¼è½¬æ¢** - æ”¯æŒMarkdownã€HTMLã€PDFç­‰å¤šç§æ ¼å¼
- âœ… **å®ç°è´¨é‡è¯„ä¼°** - è‡ªåŠ¨æ£€æŸ¥æ–‡æ¡£è´¨é‡å’Œå®Œæ•´æ€§

---

## ç³»ç»Ÿæ¶æ„è®¾è®¡

### 1. æ•´ä½“æ¶æ„

```mermaid
graph TB
    User[ğŸ‘¨â€ğŸ’» ç”¨æˆ·]
    
    User --> Orch[ğŸ“‹ æ–‡æ¡£ç¼–æ’å™¨<br/>Document Orchestrator]
    
    Orch --> Parser[ğŸ“– æ–‡æ¡£è§£æå™¨<br/>Document Parser]
    Orch --> Generator[âœ¨ å†…å®¹ç”Ÿæˆå™¨<br/>Content Generator]
    Orch --> Formatter[ğŸ¨ æ ¼å¼è½¬æ¢å™¨<br/>Format Converter]
    Orch --> Reviewer[ğŸ” è´¨é‡è¯„å®¡å™¨<br/>Quality Reviewer]
    
    Parser --> KB[(çŸ¥è¯†åº“<br/>Knowledge Base)]
    Generator --> KB
    Reviewer --> KB
    
    KB --> LLM[ğŸ¤– LLMæœåŠ¡]
    
    style Orch fill:#ff6b6b,color:#fff
    style Parser fill:#339af0
    style Generator fill:#51cf66
    style Formatter fill:#ffd43b
    style Reviewer fill:#a855f7
```

### 2. æ ¸å¿ƒæ™ºèƒ½ä½“èŒè´£

| æ™ºèƒ½ä½“ | ä¸»è¦åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º |
|--------|---------|------|------|
| **æ–‡æ¡£è§£æå™¨** | æå–ç»“æ„å’Œå†…å®¹ | åŸå§‹æ–‡æ¡£ | æ–‡æ¡£AST |
| **å†…å®¹ç”Ÿæˆå™¨** | åˆ›ä½œæ–‡æ¡£å†…å®¹ | å¤§çº²/éœ€æ±‚ | å®Œæ•´å†…å®¹ |
| **æ ¼å¼è½¬æ¢å™¨** | å¤šæ ¼å¼è½¬æ¢ | æºæ ¼å¼æ–‡æ¡£ | ç›®æ ‡æ ¼å¼æ–‡æ¡£ |
| **è´¨é‡è¯„å®¡å™¨** | æ£€æŸ¥æ–‡æ¡£è´¨é‡ | æ–‡æ¡£å†…å®¹ | è´¨é‡æŠ¥å‘Š |

---

## ä¸€ã€æ–‡æ¡£è§£ææ™ºèƒ½ä½“

### 1. æ–‡æ¡£ç»“æ„ç†è§£

ä¸åŒäºä»£ç ,æ–‡æ¡£æœ‰è‡ªå·±çš„ç»“æ„å±‚æ¬¡ï¼š

```mermaid
graph TB
    Doc[æ–‡æ¡£]
    Doc --> Meta[å…ƒæ•°æ®]
    Doc --> Body[æ­£æ–‡]
    
    Meta --> Title[æ ‡é¢˜]
    Meta --> Author[ä½œè€…]
    Meta --> Date[æ—¥æœŸ]
    
    Body --> Ch1[ç¬¬1ç« ]
    Body --> Ch2[ç¬¬2ç« ]
    
    Ch1 --> Sec1[1.1èŠ‚]
    Ch1 --> Sec2[1.2èŠ‚]
    
    Sec1 --> Para[æ®µè½]
    Sec1 --> Code[ä»£ç å—]
    Sec1 --> Table[è¡¨æ ¼]
    
    style Doc fill:#339af0,color:#fff
    style Body fill:#51cf66
```

### 2. Markdownè§£æç¤ºä¾‹

```java
public class MarkdownParser {
    public DocumentAST parse(String markdown) {
        DocumentAST ast = new DocumentAST();
        
        // 1. è§£æå…ƒæ•°æ®
        ast.setMetadata(extractMetadata(markdown));
        
        // 2. è§£ææ ‡é¢˜å±‚æ¬¡
        ast.setHeadings(extractHeadings(markdown));
        
        // 3. è§£æå†…å®¹å—
        ast.setBlocks(extractBlocks(markdown));
        
        return ast;
    }
    
    private List<Heading> extractHeadings(String markdown) {
        List<Heading> headings = new ArrayList<>();
        Pattern pattern = Pattern.compile("^(#{1,6})\\s+(.+)$", Pattern.MULTILINE);
        Matcher matcher = pattern.matcher(markdown);
        
        while (matcher.find()) {
            int level = matcher.group(1).length();
            String text = matcher.group(2);
            headings.add(new Heading(level, text));
        }
        
        return headings;
    }
}
```

### 3. æ–‡æ¡£ASTç»“æ„

```java
public class DocumentAST {
    private Metadata metadata;           // æ–‡æ¡£å…ƒæ•°æ®
    private List<Heading> headings;      // æ ‡é¢˜ç»“æ„
    private List<ContentBlock> blocks;   // å†…å®¹å—
    private Map<String, Link> links;     // é“¾æ¥ç´¢å¼•
    
    // æå–å…³é”®ä¿¡æ¯
    public List<String> getKeywords() {
        // ä»æ ‡é¢˜å’Œå†…å®¹ä¸­æå–å…³é”®è¯
    }
    
    public String getSummary() {
        // ç”Ÿæˆæ–‡æ¡£æ‘˜è¦
    }
}
```

---

## äºŒã€å†…å®¹ç”Ÿæˆæ™ºèƒ½ä½“

### 1. ç”Ÿæˆå·¥ä½œæµ

```mermaid
sequenceDiagram
    participant User as ğŸ‘¨â€ğŸ’» ç”¨æˆ·
    participant Gen as å†…å®¹ç”Ÿæˆå™¨
    participant Parser as æ–‡æ¡£è§£æå™¨
    participant LLM as ğŸ¤– LLM
    
    User->>Gen: æä¾›æ–‡æ¡£å¤§çº²
    Gen->>Parser: è§£æå·²æœ‰å†…å®¹
    Parser-->>Gen: è¿”å›æ–‡æ¡£ç»“æ„
    
    Gen->>Gen: è§„åˆ’ç« èŠ‚å†…å®¹
    
    loop é€ç« èŠ‚ç”Ÿæˆ
        Gen->>LLM: ç”Ÿæˆç« èŠ‚å†…å®¹
        LLM-->>Gen: è¿”å›ç”Ÿæˆå†…å®¹
        Gen->>Gen: åå¤„ç†ä¼˜åŒ–
    end
    
    Gen-->>User: å®Œæ•´æ–‡æ¡£
```

### 2. æ ¸å¿ƒå®ç°

```java
public class ContentGenerationAgent extends Agent {
    private LLMService llmService;
    private TemplateEngine templateEngine;
    
    public Document generateDocument(DocumentOutline outline) {
        Document doc = new Document();
        
        // 1. ç”Ÿæˆæ ‡é¢˜å’Œæ‘˜è¦
        doc.setTitle(generateTitle(outline));
        doc.setSummary(generateSummary(outline));
        
        // 2. é€ç« èŠ‚ç”Ÿæˆ
        for (ChapterOutline chapter : outline.getChapters()) {
            Chapter generatedChapter = generateChapter(chapter);
            doc.addChapter(generatedChapter);
        }
        
        // 3. ç”Ÿæˆç»“è®º
        doc.setConclusion(generateConclusion(doc));
        
        return doc;
    }
    
    private Chapter generateChapter(ChapterOutline outline) {
        Chapter chapter = new Chapter(outline.getTitle());
        
        // æ„å»ºæç¤ºè¯
        String prompt = buildChapterPrompt(outline);
        
        // è°ƒç”¨LLMç”Ÿæˆ
        String content = llmService.generate(prompt);
        
        // è§£æå¹¶ç»“æ„åŒ–
        chapter.setContent(parseGeneratedContent(content));
        
        return chapter;
    }
}
```

### 3. æç¤ºè¯å·¥ç¨‹

å¥½çš„æç¤ºè¯æ˜¯ç”Ÿæˆè´¨é‡çš„å…³é”®ï¼š

```java
private String buildChapterPrompt(ChapterOutline outline) {
    return String.format("""
        # ä»»åŠ¡
        ä¸ºæŠ€æœ¯æ–‡æ¡£ç”Ÿæˆç« èŠ‚å†…å®¹
        
        # ç« èŠ‚ä¿¡æ¯
        - æ ‡é¢˜: %s
        - å…³é”®ç‚¹: %s
        - ç›®æ ‡å—ä¼—: %s
        
        # å†™ä½œè¦æ±‚
        1. é€šä¿—æ˜“æ‡‚,æ·±å…¥æµ…å‡º
        2. åŒ…å«ä»£ç ç¤ºä¾‹
        3. ä½¿ç”¨Mermaidå›¾è¡¨è¾…åŠ©è¯´æ˜
        4. æ¯ä¸ªæ¦‚å¿µå…ˆè§£é‡Š"ä¸ºä»€ä¹ˆ",å†è®²"æ€ä¹ˆåš"
        
        # æœŸæœ›é•¿åº¦
        800-1200å­—
        
        è¯·ç”Ÿæˆç¬¦åˆä¸Šè¿°è¦æ±‚çš„ç« èŠ‚å†…å®¹ã€‚
        """,
        outline.getTitle(),
        String.join(", ", outline.getKeyPoints()),
        outline.getAudience()
    );
}
```

---

## ä¸‰ã€æ ¼å¼è½¬æ¢æ™ºèƒ½ä½“

### 1. å¤šæ ¼å¼æ”¯æŒ

```mermaid
graph TB
    Markdown[Markdown]
    HTML[HTML]
    PDF[PDF]
    Word[Word DOCX]
    LaTeX[LaTeX]
    
    Markdown <--> HTML
    Markdown <--> PDF
    Markdown <--> Word
    HTML <--> PDF
    LaTeX <--> PDF
    
    style Markdown fill:#51cf66
```

### 2. è½¬æ¢å®ç°

```java
public class FormatConverterAgent extends Agent {
    private Map<FormatPair, Converter> converters;
    
    public Document convert(Document source, DocumentFormat targetFormat) {
        DocumentFormat sourceFormat = source.getFormat();
        FormatPair pair = new FormatPair(sourceFormat, targetFormat);
        
        Converter converter = converters.get(pair);
        if (converter == null) {
            // å°è¯•é—´æ¥è½¬æ¢ï¼ˆå¦‚MD -> HTML -> PDFï¼‰
            return convertIndirect(source, targetFormat);
        }
        
        return converter.convert(source);
    }
}

// Markdownè½¬HTMLç¤ºä¾‹
public class MarkdownToHtmlConverter implements Converter {
    @Override
    public Document convert(Document markdown) {
        String md = markdown.getContent();
        
        // ä½¿ç”¨æˆç†Ÿçš„Markdownå¤„ç†åº“
        Parser parser = Parser.builder().build();
        Node document = parser.parse(md);
        
        HtmlRenderer renderer = HtmlRenderer.builder()
            .extensions(List.of(
                TablesExtension.create(),
                StrikethroughExtension.create()
            ))
            .build();
        
        String html = renderer.render(document);
        
        return new Document(html, DocumentFormat.HTML);
    }
}
```

---

## å››ã€è´¨é‡è¯„å®¡æ™ºèƒ½ä½“

### 1. è¯„å®¡ç»´åº¦

```mermaid
graph TB
    Doc[æ–‡æ¡£è´¨é‡]
    
    Doc --> Complete[å®Œæ•´æ€§]
    Doc --> Accurate[å‡†ç¡®æ€§]
    Doc --> Readable[å¯è¯»æ€§]
    Doc --> Consistent[ä¸€è‡´æ€§]
    
    Complete --> C1[ç« èŠ‚å®Œæ•´]
    Complete --> C2[ç¤ºä¾‹å……è¶³]
    
    Accurate --> A1[æŠ€æœ¯æ­£ç¡®]
    Accurate --> A2[é“¾æ¥æœ‰æ•ˆ]
    
    Readable --> R1[è¯­å¥é€šé¡º]
    Readable --> R2[å±‚æ¬¡æ¸…æ™°]
    
    Consistent --> Co1[æœ¯è¯­ç»Ÿä¸€]
    Consistent --> Co2[æ ¼å¼ä¸€è‡´]
    
    style Doc fill:#ff6b6b,color:#fff
    style Complete fill:#51cf66
    style Accurate fill:#339af0
    style Readable fill:#ffd43b
    style Consistent fill:#a855f7
```

### 2. è´¨é‡æ£€æŸ¥å®ç°

```java
public class QualityReviewerAgent extends Agent {
    public QualityReport review(Document doc) {
        QualityReport report = new QualityReport();
        
        // 1. å®Œæ•´æ€§æ£€æŸ¥
        report.addIssues(checkCompleteness(doc));
        
        // 2. å‡†ç¡®æ€§æ£€æŸ¥
        report.addIssues(checkAccuracy(doc));
        
        // 3. å¯è¯»æ€§æ£€æŸ¥
        report.addIssues(checkReadability(doc));
        
        // 4. ä¸€è‡´æ€§æ£€æŸ¥
        report.addIssues(checkConsistency(doc));
        
        // 5. è®¡ç®—æ€»åˆ†
        report.calculateScore();
        
        return report;
    }
    
    private List<Issue> checkCompleteness(Document doc) {
        List<Issue> issues = new ArrayList<>();
        
        // æ£€æŸ¥æ˜¯å¦æœ‰ç›®å½•
        if (doc.getTableOfContents() == null) {
            issues.add(new Issue(
                IssueSeverity.MEDIUM,
                "ç¼ºå°‘ç›®å½•",
                "å»ºè®®æ·»åŠ æ–‡æ¡£ç›®å½•ä»¥æå‡å¯è¯»æ€§"
            ));
        }
        
        // æ£€æŸ¥ä»£ç ç¤ºä¾‹
        if (doc.getCodeBlocks().size() < 3) {
            issues.add(new Issue(
                IssueSeverity.LOW,
                "ä»£ç ç¤ºä¾‹è¾ƒå°‘",
                "å»ºè®®æ·»åŠ æ›´å¤šä»£ç ç¤ºä¾‹å¸®åŠ©ç†è§£"
            ));
        }
        
        return issues;
    }
}
```

### 3. è´¨é‡æŠ¥å‘Šç¤ºä¾‹

```markdown
## æ–‡æ¡£è´¨é‡æŠ¥å‘Š

### æ€»ä½“è¯„åˆ†: 85/100 â­â­â­â­

### âŒ é«˜ä¼˜å…ˆçº§é—®é¢˜ (0)
æ— 

### âš ï¸ ä¸­ä¼˜å…ˆçº§é—®é¢˜ (2)

1. **ç« èŠ‚3.2ç¼ºå°‘ä»£ç ç¤ºä¾‹**
   - ä½ç½®: ç¬¬3ç« ç¬¬2èŠ‚
   - å»ºè®®: æ·»åŠ å®é™…ä»£ç å±•ç¤ºæ¦‚å¿µ

2. **æœ¯è¯­ä¸ä¸€è‡´**
   - "æ™ºèƒ½ä½“" vs "Agent" æ··ç”¨
   - å»ºè®®: ç»Ÿä¸€ä½¿ç”¨ä¸­æ–‡æœ¯è¯­

### â„¹ï¸ ä½ä¼˜å…ˆçº§é—®é¢˜ (3)

3. **å›¾è¡¨å¯ä»¥æ›´ä¸°å¯Œ**
   - å¯ä»¥æ·»åŠ æ¶æ„å›¾å’Œæµç¨‹å›¾
   
4. **ç¼ºå°‘æ€»ç»“éƒ¨åˆ†**
   - å»ºè®®åœ¨ç« èŠ‚æœ«å°¾æ·»åŠ å°ç»“

5. **å¤–éƒ¨é“¾æ¥æœªæ£€æŸ¥**
   - éƒ¨åˆ†é“¾æ¥å¯èƒ½å¤±æ•ˆ

### âœ… æ–‡æ¡£ä¼˜ç‚¹

- âœ“ ç»“æ„æ¸…æ™°,å±‚æ¬¡åˆ†æ˜
- âœ“ è¯­è¨€é€šä¿—æ˜“æ‡‚
- âœ“ æœ‰å®é™…åº”ç”¨æ¡ˆä¾‹
- âœ“ æ’ç‰ˆç¾è§‚
```

---

## äº”ã€å®æˆ˜æ¡ˆä¾‹ï¼šæŠ€æœ¯åšå®¢ç”Ÿæˆ

### 1. éœ€æ±‚æè¿°

ç”¨æˆ·æƒ³å†™ä¸€ç¯‡å…³äº"Javaå¹¶å‘ç¼–ç¨‹æœ€ä½³å®è·µ"çš„æŠ€æœ¯åšå®¢ï¼š

```java
BlogRequest request = BlogRequest.builder()
    .topic("Javaå¹¶å‘ç¼–ç¨‹æœ€ä½³å®è·µ")
    .audience("ä¸­é«˜çº§Javaå¼€å‘è€…")
    .length("3000-4000å­—")
    .includeSections(List.of(
        "çº¿ç¨‹å®‰å…¨", 
        "å¹¶å‘é›†åˆ",
        "çº¿ç¨‹æ± ä½¿ç”¨",
        "å¸¸è§é™·é˜±"
    ))
    .includeCode(true)
    .includeDiagrams(true)
    .build();
```

### 2. ç”Ÿæˆçš„æ–‡æ¡£ç»“æ„

```mermaid
graph TB
    Blog[æŠ€æœ¯åšå®¢]
    
    Blog --> Intro[å¼•è¨€<br/>å¹¶å‘ç¼–ç¨‹çš„é‡è¦æ€§]
    Blog --> Sec1[ç¬¬1èŠ‚: çº¿ç¨‹å®‰å…¨]
    Blog --> Sec2[ç¬¬2èŠ‚: å¹¶å‘é›†åˆ]
    Blog --> Sec3[ç¬¬3èŠ‚: çº¿ç¨‹æ± ]
    Blog --> Sec4[ç¬¬4èŠ‚: å¸¸è§é™·é˜±]
    Blog --> Summary[æ€»ç»“]
    
    Sec1 --> Code1[ä»£ç ç¤ºä¾‹]
    Sec1 --> Diagram1[å¹¶å‘é—®é¢˜å›¾ç¤º]
    
    Sec2 --> Code2[ConcurrentHashMapç¤ºä¾‹]
    
    Sec3 --> Code3[çº¿ç¨‹æ± é…ç½®]
    Sec3 --> Diagram3[çº¿ç¨‹æ± åŸç†å›¾]
    
    style Blog fill:#339af0,color:#fff
```

### 3. ç”Ÿæˆçš„å†…å®¹ç‰‡æ®µ

```markdown
## å¼•è¨€ï¼šä¸ºä»€ä¹ˆå¹¶å‘ç¼–ç¨‹å¦‚æ­¤é‡è¦

åœ¨ç°ä»£åº”ç”¨ä¸­ï¼Œå•çº¿ç¨‹å·²æ— æ³•æ»¡è¶³æ€§èƒ½éœ€æ±‚ã€‚æƒ³è±¡ä¸€ä¸ªç”µå•†ç½‘ç«™ï¼š

```mermaid
graph LR
    A[ç”¨æˆ·è¯·æ±‚] --> B[ä¸‹å•]
    A --> C[æ”¯ä»˜]
    A --> D[åº“å­˜æ£€æŸ¥]
    A --> E[å‘é€é€šçŸ¥]
```

å¦‚æœè¿™äº›æ“ä½œä¸²è¡Œæ‰§è¡Œï¼Œç”¨æˆ·ä½“éªŒä¼šå¾ˆå·®ã€‚**å¹¶å‘ç¼–ç¨‹è®©æˆ‘ä»¬å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡**ã€‚

## ç¬¬1èŠ‚ï¼šçº¿ç¨‹å®‰å…¨çš„æœ¬è´¨

### ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿ

çº¿ç¨‹å®‰å…¨çš„å®šä¹‰å¾ˆç®€å•ï¼š**å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡æ—¶,å¦‚æœä¸éœ€è¦é¢å¤–çš„åŒæ­¥æªæ–½,ç¨‹åºçš„è¡Œä¸ºæ€»æ˜¯æ­£ç¡®çš„ã€‚**

### ç»å…¸æ¡ˆä¾‹ï¼šè®¡æ•°å™¨

```java
// âŒ ä¸å®‰å…¨çš„å®ç°
public class UnsafeCounter {
    private int count = 0;
    
    public void increment() {
        count++;  // éåŸå­æ“ä½œï¼
    }
}

// âœ… å®‰å…¨çš„å®ç°
public class SafeCounter {
    private AtomicInteger count = new AtomicInteger(0);
    
    public void increment() {
        count.incrementAndGet();  // åŸå­æ“ä½œ
    }
}
```

### ä¸ºä»€ä¹ˆä¼šä¸å®‰å…¨ï¼Ÿ

`count++` å®é™…åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼š

```mermaid
sequenceDiagram
    participant T1 as çº¿ç¨‹1
    participant Mem as å†…å­˜
    participant T2 as çº¿ç¨‹2
    
    T1->>Mem: è¯»å–count=0
    T2->>Mem: è¯»å–count=0
    T1->>T1: è®¡ç®—0+1=1
    T2->>T2: è®¡ç®—0+1=1
    T1->>Mem: å†™å…¥count=1
    T2->>Mem: å†™å…¥count=1
    
    Note over Mem: æœŸæœ›ç»“æœæ˜¯2,å®é™…æ˜¯1ï¼
```

... (ç»§ç»­ç”Ÿæˆå…¶ä»–ç« èŠ‚)
```

---

## æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ

### 1. å¢é‡ç”Ÿæˆ

å¯¹äºé•¿æ–‡æ¡£,é‡‡ç”¨å¢é‡ç”Ÿæˆç­–ç•¥ï¼š

```java
public class IncrementalGenerator {
    public void generateLongDocument(DocumentOutline outline, OutputStream output) {
        // é€ç« èŠ‚ç”Ÿæˆå¹¶å†™å…¥
        for (ChapterOutline chapter : outline.getChapters()) {
            Chapter generated = generateChapter(chapter);
            output.write(formatChapter(generated));
            output.flush();  // ç«‹å³è¾“å‡º,æå‡ä½“éªŒ
        }
    }
}
```

### 2. æ¨¡æ¿å¤ç”¨

å¸¸è§æ–‡æ¡£ç±»å‹ä½¿ç”¨æ¨¡æ¿åŠ é€Ÿï¼š

```java
public class TemplateManager {
    private Map<DocumentType, Template> templates;
    
    public Document generateFromTemplate(DocumentType type, Map<String, Object> data) {
        Template template = templates.get(type);
        return template.render(data);
    }
}

// æ”¯æŒçš„æ¨¡æ¿ç±»å‹
enum DocumentType {
    API_REFERENCE,      // APIæ–‡æ¡£æ¨¡æ¿
    TUTORIAL,           // æ•™ç¨‹æ¨¡æ¿
    DESIGN_DOC,         // è®¾è®¡æ–‡æ¡£æ¨¡æ¿
    BLOG_POST,          // åšå®¢æ–‡ç« æ¨¡æ¿
    README              // READMEæ¨¡æ¿
}
```

### 3. åä½œç¼–è¾‘

å¤šäººåä½œæ—¶çš„å†²çªå¤„ç†ï¼š

```java
public class CollaborativeEditor {
    public Document mergeChanges(Document base, List<DocumentChange> changes) {
        // ä½¿ç”¨æ“ä½œè½¬æ¢(OT)æˆ–CRDTç®—æ³•
        Document result = base.clone();
        
        for (DocumentChange change : changes) {
            try {
                result = applyChange(result, change);
            } catch (ConflictException e) {
                // æ ‡è®°å†²çªä¾›äººå·¥è§£å†³
                result.markConflict(change);
            }
        }
        
        return result;
    }
}
```

---

## æœ¬èŠ‚å°ç»“

### å…³é”®è¦ç‚¹

1. **æ–‡æ¡£=ç»“æ„+å†…å®¹**ï¼šç†è§£æ–‡æ¡£ç»“æ„æ˜¯å¤„ç†çš„åŸºç¡€
2. **æç¤ºè¯å·¥ç¨‹**ï¼šå¥½çš„æç¤ºè¯å†³å®šç”Ÿæˆè´¨é‡  
3. **è´¨é‡ä¼˜å…ˆ**ï¼šè‡ªåŠ¨æ£€æŸ¥ç¡®ä¿æ–‡æ¡£è´¨é‡
4. **æ ¼å¼çµæ´»**ï¼šæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼
5. **äººæœºåä½œ**ï¼šAIè¾…åŠ©åˆ›ä½œ,äººå·¥å®¡æ ¸æŠŠå…³

### å­¦ä¹ æ£€æŸ¥æ¸…å•

- [ ] ç†è§£æ–‡æ¡£ASTç»“æ„
- [ ] èƒ½è§£æå¸¸è§æ–‡æ¡£æ ¼å¼
- [ ] èƒ½ä½¿ç”¨LLMç”Ÿæˆæ–‡æ¡£å†…å®¹
- [ ] èƒ½å®ç°æ ¼å¼è½¬æ¢
- [ ] èƒ½è¯„ä¼°æ–‡æ¡£è´¨é‡

### åº”ç”¨åœºæ™¯

```mermaid
mindmap
  root((æ‰‹ç¨¿æ™ºèƒ½ä½“<br/>åº”ç”¨))
    æŠ€æœ¯æ–‡æ¡£
      APIæ–‡æ¡£
      è®¾è®¡æ–‡æ¡£
      ç”¨æˆ·æ‰‹å†Œ
    å¼€å‘è¾…åŠ©
      READMEç”Ÿæˆ
      å˜æ›´æ—¥å¿—
      å‘å¸ƒè¯´æ˜
    å†…å®¹åˆ›ä½œ
      æŠ€æœ¯åšå®¢
      æ•™ç¨‹æ–‡ç« 
      ä¹¦ç±å†™ä½œ
    è‡ªåŠ¨åŒ–
      å‘¨æŠ¥ç”Ÿæˆ
      ä¼šè®®çºªè¦
      ä»£ç æ³¨é‡Š
```

---

**ä¸‹ä¸€èŠ‚é¢„å‘Š**ï¼š18.4 æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“ - æ„å»ºçŸ¥è¯†å‘ç°ç³»ç»Ÿ,è®©AIå¸®ä½ åšæ–‡çŒ®è°ƒç ”å’Œè¶‹åŠ¿åˆ†æã€‚

**å®è·µå»ºè®®**ï¼š
1. ä»ç®€å•çš„READMEç”Ÿæˆå¼€å§‹
2. é€æ­¥æ‰©å±•åˆ°æŠ€æœ¯åšå®¢
3. æœ€åå°è¯•å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£

**å‚è€ƒèµ„æº**ï¼š
- TinyAIæºç ï¼š`tinyai-agent-manus`æ¨¡å—
- Markdownè§„èŒƒ
- Pandocæ–‡æ¡£è½¬æ¢å·¥å…·
